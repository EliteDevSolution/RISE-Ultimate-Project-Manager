function selectLastlySelectedTab(t){t||(t=""),$(t+" [data-toggle='ajax-tab']").each(function(){var t=$(this).attr("id"),a=getCookie("user_"+AppHelper.userId+"_"+t),e=$(this).find("[data-target='"+a+"']");a&&e.attr("data-target")?setTimeout(function(){e.trigger("click")},200):$(this).find("a").first().trigger("click")})}$(document).ready(function(){$.ajaxSetup({cache:!1}),moment.locale(AppLanugage.locale),jQuery.fn.datepicker.dates.custom={days:AppLanugage.days,daysShort:AppLanugage.daysShort,daysMin:AppLanugage.daysMin,months:AppLanugage.months,monthsShort:AppLanugage.monthsShort,today:AppLanugage.today},$("body").on("click","[data-act=ajax-modal]",function(){var t={ajaxModal:1},a=$(this).attr("data-action-url"),e=$(this).attr("data-modal-lg"),n=$(this).attr("data-title");return a?(n?$("#ajaxModalTitle").html(n):$("#ajaxModalTitle").html($("#ajaxModalTitle").attr("data-title")),$(this).attr("data-post-hide-header")?($("#ajaxModal .modal-header").addClass("hide"),$("#ajaxModal .modal-footer").addClass("hide")):($("#ajaxModal .modal-header").removeClass("hide"),$("#ajaxModal .modal-footer").removeClass("hide")),$("#ajaxModalContent").html($("#ajaxModalOriginalContent").html()),$("#ajaxModalContent").find(".original-modal-body").removeClass("original-modal-body").addClass("modal-body"),$("#ajaxModal").modal("show"),$(this).each(function(){$.each(this.attributes,function(){if(this.specified&&this.name.match("^data-post-")){var a=this.name.replace("data-post-","");t[a]=this.value}})}),ajaxModalXhr=$.ajax({url:a,data:t,cache:!1,type:"POST",success:function(t){$("#ajaxModal").find(".modal-dialog").removeClass("mini-modal"),"1"===e&&$("#ajaxModal").find(".modal-dialog").addClass("modal-lg"),$("#ajaxModalContent").html(t),setSummernoteToAll(!0),setTimeout(function(){setModalScrollbar()},400)},statusCode:{404:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}}),!1):(console.log("Ajax Modal: Set data-action-url!"),!1)}),$("#ajaxModal").on("hidden.bs.modal",function(t){ajaxModalXhr.abort(),$("#ajaxModal").find(".modal-dialog").removeClass("modal-lg"),$("#ajaxModal").find(".modal-dialog").addClass("mini-modal"),$("#ajaxModalContent").html("")}),$("body").on("click","[data-act=ajax-request]",function(){var t={},a=$(this),e=a.attr("data-action-url"),n=a.attr("data-remove-on-success"),o=a.attr("data-remove-on-click"),r=a.attr("data-fade-out-on-success"),i=a.attr("data-fade-out-on-click"),s=a.attr("data-inline-loader"),l=a.attr("data-reload-on-success"),d="";if(a.attr("data-real-target")?d=$(a.attr("data-real-target")):a.attr("data-closest-target")&&(d=a.closest(a.attr("data-closest-target"))),!e)return console.log("Ajax Request: Set data-action-url!"),!1;o&&$(o).length&&$(o).remove(),i&&$(i).length&&$(i).fadeOut(function(){$(this).remove()}),a.each(function(){$.each(this.attributes,function(){if(this.specified&&this.name.match("^data-post-")){var a=this.name.replace("data-post-","");t[a]=this.value}})}),"1"===s?a.addClass("inline-loader"):appLoader.show(),ajaxRequestXhr=$.ajax({url:e,data:t,cache:!1,type:"POST",success:function(t){l&&location.reload(),n&&$(n).length&&$(n).remove(),r&&$(r).length&&$(r).fadeOut(function(){$(this).remove()}),appLoader.hide(),d.length&&d.html(t)},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.")}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.")}})}),$("body").on("click",'[data-toggle="ajax-tab"] a',function(){var t=$(this),a=t.attr("href"),e=t.attr("data-target");return!!e&&(""===$(e).html()&&(appLoader.show({container:e,css:"right:50%; bottom:auto;"}),$.get(a,function(t){$(e).html(t),selectLastlySelectedTab(e)})),t.tab("show"),!1)}),selectLastlySelectedTab(),$("body").on("click",'[data-toggle="app-modal"]',function(){var t=!0;return"0"===$(this).attr("data-sidebar")&&(t=!1),appContentModal.init({url:$(this).attr("data-url"),sidebar:t}),!1});var t=function(t,a){var e=a.attr("data-success-callback");e&&void 0!==window[e]&&(window[e](t,a),t.message&&appAlert.warning(t.message,{duration:2e4}))};$("body").on("click","a[data-action=delete-confirmation]:not(table a)",function(a){deleteConfirmationHandler(a,t)})}),function(t){t.fn.appForm=function(a){var e=t.extend({},{ajaxSubmit:!0,isModal:!0,closeModalOnSuccess:!0,dataType:"json",showLoader:!0,onModalClose:function(){},onSuccess:function(){},onError:function(){return!0},onSubmit:function(){},onAjaxSuccess:function(){},beforeAjaxSubmit:function(t,a,e){}},a);function n(t){if(t){var a,e=(a=(a=AppHelper.settings.dateFormat||"Y.m.d").toLowerCase()).charAt("1"),n=a.split(e),o=0,r=1,i=2;"y"===n[1]?o=1:"y"===n[2]&&(o=2),"m"===n[0]?r=0:"m"===n[2]&&(r=2),"d"===n[0]?i=0:"d"===n[1]&&(i=1);var s=t.split(e);return s[o]+"-"+s[r]+"-"+s[i]}}function o(a,e){t.validator.addMethod("greaterThanOrEqual",function(a,e,o){var r=o;return!o||0!==o.indexOf("#")&&0!==o.indexOf(".")||(r=t(o).val()),void 0===t(e).attr("data-rule-required")&&!a||(/Invalid|NaN/.test(new Date(n(a)))?isNaN(a)&&isNaN(r)||Number(a)>=Number(r):!r||new Date(n(a))>=new Date(n(r)))},"Must be greater than {0}."),t.validator.addMethod("greaterThan",function(a,e,n){var o=n;return!n||0!==n.indexOf("#")&&0!==n.indexOf(".")||(o=t(n).val()),/Invalid|NaN/.test(new Number(a))?isNaN(a)&&isNaN(o)||Number(a)>Number(o):new Number(a)>new Number(o)},"Must be greater than."),t.validator.addMethod("mustBeSameYear",function(a,e,o){var r=o;if(!o||0!==o.indexOf("#")&&0!==o.indexOf(".")||(r=t(o).val()),!/Invalid|NaN/.test(new Date(n(a)))){var i=new Date(n(a)),s=new Date(n(r));return i&&s&&i.getFullYear()===s.getFullYear()}},"The year must be same for both dates."),t(a).validate({submitHandler:function(t){if(!e)return!0;e(t)},highlight:function(a){t(a).closest(".form-group").addClass("has-error")},unhighlight:function(a){t(a).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",ignore:":hidden:not(.validate-hidden)",errorPlacement:function(t,a){a.parent(".input-group").length?t.insertAfter(a.parent()):t.insertAfter(a)}}),t(".validate-hidden").click(function(){t(this).closest(".form-group").removeClass("has-error").find(".help-block").hide()})}function r(a){a&&(t(".modal-mask").html("<div class='circle-done'><i class='fa fa-check'></i></div>"),setTimeout(function(){t(".modal-mask").find(".circle-done").addClass("ok")},30)),setTimeout(function(){t(".modal-mask").remove(),t("#ajaxModal").modal("toggle"),e.onModalClose()},1e3)}return this.each(function(){e.ajaxSubmit?o(t(this),function(a){e.onSubmit(),e.isModal?function(a){var e=a.height()-80;e>0&&(e=Math.floor(e/2));a.after("<div class='modal-mask'><div class='circle-loader'></div></div>");var n=a.outerHeight();t(".modal-mask").css({width:a.width()+22+"px",height:n+"px","padding-top":e+"px"}),a.closest(".modal-dialog").find('[type="submit"]').attr("disabled","disabled"),a.addClass("hide")}(t("#ajaxModalContent").find(".modal-body")):t(a).find('[type="submit"]').attr("disabled","disabled"),"1"===AppHelper.settings.enableRichTextEditor&&t("textarea").each(function(){var a=t(this);a.attr("data-rich-text-editor")&&("<p><br></p>"===a.val()||""===a.val()?a.val(""):a.val(a.summernote("code")))}),t(a).ajaxSubmit({dataType:e.dataType,beforeSubmit:function(o,r,i){t.each(o,function(t,a){a.data&&a.data.convertDateFormat&&a.value&&(o[t].value=n(a.value))}),!e.isModal&&e.showLoader&&appLoader.show({container:a,css:"top:2%; right:46%;"}),e.beforeAjaxSubmit(o,r,i)},success:function(n){var o;e.onAjaxSuccess(n),n.success?(e.onSuccess(n),e.isModal&&e.closeModalOnSuccess&&r(!0),e.isModal||t(a).find("textarea").each(function(){t(this).attr("data-rich-text-editor")&&t(this).summernote("destroy")}),appLoader.hide()):e.onError(n)&&(e.isModal?((o=t(".modal-body").removeClass("hide")).closest(".modal-dialog").find('[type="submit"]').removeAttr("disabled"),o.removeClass("hide"),t(".modal-mask").remove(),n.message&&appAlert.error(n.message,{container:".modal-body",animate:!1})):n.message&&appAlert.error(n.message)),t(a).find('[type="submit"]').removeAttr("disabled")}})}):o(t(this))}),this.closeModal=function(){r(!0)},this}}(jQuery);var getWeekRange=function(t){t||(t=moment().format("YYYY-MM-DD"));var a=moment(t).format("E")-AppHelper.settings.firstDayOfWeek,e={};return e.firstDateOfWeek=a<7?moment(t).subtract(a,"days").format("YYYY-MM-DD"):moment(t).format("YYYY-MM-DD"),a<0&&(e.firstDateOfWeek=moment(e.firstDateOfWeek).subtract(7,"days").format("YYYY-MM-DD")),e.lastDateOfWeek=moment(e.firstDateOfWeek).add(6,"days").format("YYYY-MM-DD"),e},prepareDefaultFilters=function(t){return t=function(t){return $.each(t.rangeDatepicker||[],function(a,e){e.startDate&&e.startDate.value&&(t.filterParams[e.startDate.name]=e.startDate.value),e.startDate&&e.endDate.value&&(t.filterParams[e.endDate.name]=e.endDate.value)}),t}(t=function(t){return $.each(t.singleDatepicker||[],function(a,e){$.each(e.options||[],function(a,n){n.isSelected&&(t.filterParams[e.name]=n.value)})}),t}(t=function(t){return $.each(t.filterDropdown||[],function(a,e){$.each(e.options,function(a,n){n.isSelected&&(t.filterParams[e.name]=n.id)})}),t}(t=function(t){return $.each(t.radioButtons,function(a,e){e.isChecked&&(t.filterParams[e.name]=e.value)}),t}(t=function(t){return $.each(t.multiSelect,function(a,e){var n=[];$.each(e.options,function(t,a){a.isChecked&&n.push(a.value)}),t.filterParams[e.name]=n}),t}(t=function(t){var a=[],e="";return $.each(t.checkBoxes,function(t,n){e=n.name,n.isChecked&&a.push(n.value)}),t.filterParams[e]=a,t}(t=function(t){if("daily"===t.dateRangeType)t.filterParams.start_date=moment().format(t._inputDateFormat),t.filterParams.end_date=t.filterParams.start_date;else if("monthly"===t.dateRangeType){var a=moment().daysInMonth(),e=moment().format("YYYY-MM");t.filterParams.start_date=e+"-01",t.filterParams.end_date=e+"-"+a}else if("yearly"===t.dateRangeType){var n=moment().format("YYYY");t.filterParams.start_date=n+"-01-01",t.filterParams.end_date=n+"-12-31"}else if("weekly"===t.dateRangeType){var o=getWeekRange();t.filterParams.start_date=o.firstDateOfWeek,t.filterParams.end_date=o.lastDateOfWeek}return t}(t)))))))},buildFilterDom=function(t,a,e){var n=function(t,a){t.is("table")?t.appTable({reload:!0,filterParams:a.filterParams}):t.appFilters({reload:!0,filterParams:a.filterParams})};if(t.search&&!1!==t.search.show){var o,r='<div class="DTTT_container"><input type="search" class="custom-filter-search" name="'+t.search.name+'" placeholder="'+t.customLanguage.searchPlaceholder+'"></div>';a.find(".custom-toolbar").append(r),a.find(".custom-filter-search").keyup(function(){appLoader.show();var a=$(this);clearTimeout(o),o=setTimeout(function(){t.filterParams[t.search.name]=a.val(),n(e,t)},700)})}if(t.isMobile&&(a.find(".custom-toolbar").addClass("clearfix"),t.dateRangeType||void 0!==t.checkBoxes[0]||void 0!==t.multiSelect[0]||void 0!==t.radioButtons[0]||void 0!==t.singleDatepicker[0]||void 0!==t.rangeDatepicker[0]||void 0!==t.filterDropdown[0])){var i="<div class='pull-right'>                        <button title='"+AppLanugage.filters+"' class='dropdown-toggle btn btn-default mt0' data-toggle='collapse' data-target='#table-collapse-filter' aria-expanded='false'><i class='fa fa-sliders'></i></button>                    </div>                    <div id='table-collapse-filter' class='navbar-collapse collapse w100p'></div>";a.find(".custom-toolbar").append(i)}t.reloadSelector&&$(t.reloadSelector).length&&$(t.reloadSelector).click(function(){appLoader.show(),n(e,t)});var s=function(e){t.isMobile?a.find("#table-collapse-filter").append(e):a.find(".custom-toolbar").append(e)};if(t.dateRangeType){s('<div class="mr15 DTTT_container"><button data-act="prev" class="btn btn-default date-range-selector"><i class="fa fa-chevron-left"></i></button><button data-act="datepicker" class="btn btn-default" style="margin: -1px"></button><button data-act="next"  class="btn btn-default date-range-selector"><i class="fa fa-chevron-right"></i></button></div>');var l=a.find("[data-act='datepicker']"),d=a.find(".date-range-selector");if("daily"===t.dateRangeType){var c=function(a){t.filterParams.start_date===moment().format(t._inputDateFormat)?a.html(t.customLanguage.today):t.filterParams.start_date===moment().subtract(1,"days").format(t._inputDateFormat)?a.html(t.customLanguage.yesterday):t.filterParams.start_date===moment().add(1,"days").format(t._inputDateFormat)?a.html(t.customLanguage.tomorrow):a.html(moment(t.filterParams.start_date).format("Do MMMM YYYY"))};c(l),l.datepicker({format:t._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom"}).on("changeDate",function(a){var o=moment(a.date).format(t._inputDateFormat);t.filterParams.start_date=o,t.filterParams.end_date=o,c(l),n(e,t)}),d.click(function(){var a=$(this).attr("data-act"),o="";"next"===a?o=moment(t.filterParams.start_date).add(1,"days").format(t._inputDateFormat):"prev"===a&&(o=moment(t.filterParams.start_date).subtract(1,"days").format(t._inputDateFormat)),t.filterParams.start_date=o,t.filterParams.end_date=o,c(l),n(e,t)})}if("monthly"===t.dateRangeType){var u=function(a){a.html(moment(t.filterParams.start_date).format("MMMM YYYY"))};u(l),l.datepicker({format:"YYYY-MM",viewMode:"months",minViewMode:"months",autoclose:!0,language:"custom"}).on("changeDate",function(a){var o=moment(a.date).format(t._inputDateFormat),r=moment(o).daysInMonth(),i=moment(o).format("YYYY-MM");t.filterParams.start_date=i+"-01",t.filterParams.end_date=i+"-"+r,u(l),n(e,t)}),d.click(function(){var a=$(this).attr("data-act"),o=moment(t.filterParams.start_date),r=moment(t.filterParams.end_date);if("next"===a){var i=o.add(1,"months"),s=i.daysInMonth();o=(d=i.format("YYYY-MM"))+"-01",r=d+"-"+s}else if("prev"===a){var d,c=o.subtract(1,"months");s=c.daysInMonth();o=(d=c.format("YYYY-MM"))+"-01",r=d+"-"+s}t.filterParams.start_date=o,t.filterParams.end_date=r,u(l),n(e,t)})}if("yearly"===t.dateRangeType){var p=function(a){a.html(moment(t.filterParams.start_date).format("YYYY"))};p(l),l.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom"}).on("changeDate",function(a){var o=moment(a.date).format(t._inputDateFormat),r=moment(o).format("YYYY");t.filterParams.start_date=r+"-01-01",t.filterParams.end_date=r+"-12-31",p(l),n(e,t)}),d.click(function(){var a=$(this).attr("data-act"),o=moment(t.filterParams.start_date),r=moment(t.filterParams.end_date);"next"===a?(o=o.add(1,"years").format(t._inputDateFormat),r=r.add(1,"years").format(t._inputDateFormat)):"prev"===a&&(o=o.subtract(1,"years").format(t._inputDateFormat),r=r.subtract(1,"years").format(t._inputDateFormat)),t.filterParams.start_date=o,t.filterParams.end_date=r,p(l),n(e,t)})}if("weekly"===t.dateRangeType){var m=function(a){var e=moment(t.filterParams.start_date).format("Do MMM"),n=moment(t.filterParams.end_date).format("Do MMM, YYYY");l.datepicker({format:"YYYY-MM-DD",autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}),a.html(e+" - "+n)};m(l),d.click(function(){var a=$(this).attr("data-act"),o=moment(t.filterParams.start_date),r=moment(t.filterParams.end_date);"next"===a?(o=o.add(7,"days").format(t._inputDateFormat),r=r.add(7,"days").format(t._inputDateFormat)):"prev"===a&&(o=o.subtract(7,"days").format(t._inputDateFormat),r=r.subtract(7,"days").format(t._inputDateFormat)),t.filterParams.start_date=o,t.filterParams.end_date=r,m(l),n(e,t)}),l.datepicker({format:t._inputDateFormat,autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}).on("show",function(){$(".datepicker").addClass("week-view"),$(".datepicker-days").find(".active").siblings(".day").addClass("active")}).on("changeDate",function(a){var o=getWeekRange(a.date);t.filterParams.start_date=o.firstDateOfWeek,t.filterParams.end_date=o.lastDateOfWeek,m(l),n(e,t)})}}if(void 0!==t.checkBoxes[0]){var f="",h=[],v="";$.each(t.checkBoxes,function(t,a){var e="",n="";v=a.name,a.isChecked&&(e=" checked",n=" active",h.push(a.value)),f+='<label class="btn btn-default '+n+'">',f+='<input type="checkbox" name="'+a.name+'" value="'+a.value+'" autocomplete="off" '+e+">"+a.text,f+="</label>"}),t.filterParams[v]=h,s('<div class="mr15 DTTT_container"><div class="btn-group filter" data-act="checkbox" data-toggle="buttons">'+f+"</div></div>"),a.find("[data-act='checkbox']").click(function(){var a=$(this);setTimeout(function(){var o=[],r="";a.parent().find("input:checkbox").each(function(){r=$(this).attr("name"),$(this).is(":checked")&&o.push($(this).val())}),t.filterParams[r]=o,n(e,t)})})}if(void 0!==t.multiSelect[0]&&$.each(t.multiSelect,function(o,r){var i="",l=[];$.each(r.options,function(t,a){var e="";a.isChecked&&(e=" active",l.push(a.value)),i+='<li class="list-group-item clickable '+e+'" data-name="'+r.name+'" data-value="'+a.value+'">',i+=a.text,i+="</li>"}),i="<ul class='list-group dropdown-menu' data-act='multiselect'>"+i+"</ul>",t.filterParams[r.name]=l;var d='<div class="mr15 DTTT_container"><span class="dropdown inline-block filter-multi-select"><button class="btn btn-default dropdown-toggle " type="button" data-toggle="dropdown" aria-expanded="true">'+r.text+' <span class="caret"></span> </button>'+i+"</span></div>";s(d),a.find("[data-name='"+r.name+"']").click(function(){var a=$(this);return a.toggleClass("active"),setTimeout(function(){var o=[],r="";a.parent().find("li").each(function(){r=$(this).attr("data-name"),$(this).hasClass("active")&&o.push($(this).attr("data-value"))}),t.filterParams[r]=o,n(e,t)}),!1})}),void 0!==t.radioButtons[0]){var g="";$.each(t.radioButtons,function(a,e){var n="",o="";e.isChecked&&(n=" checked",o=" active",t.filterParams[e.name]=e.value),g+='<label class="btn btn-default '+o+'">',g+='<input type="radio" name="'+e.name+'" value="'+e.value+'" autocomplete="off" '+n+">"+e.text,g+="</label>"}),s('<div class="mr15 DTTT_container"><div class="btn-group filter" data-act="radio" data-toggle="buttons">'+g+"</div></div>"),a.find("[data-act='radio']").click(function(){var a=$(this);setTimeout(function(){a.parent().find("input:radio").each(function(){$(this).is(":checked")&&(t.filterParams[$(this).attr("name")]=$(this).val())}),n(e,t)})})}if(void 0!==t.singleDatepicker[0]&&$.each(t.singleDatepicker,function(o,r){var i=" ",l="",d="";r.options||(r.options=[]),r.options.push({value:"show-date-picker",text:AppLanugage.custom}),$.each(r.options,function(t,a){var e="";a.isSelected&&(e="active",l=a.value,d=a.text),i+='<div class="list-group-item '+e+'" data-value="'+a.value+'">'+a.text+"</div>"}),d||(d="- "+r.defaultText+" -",i='<div class="list-group-item active" data-value="">'+d+"</div>"+i),r.name&&(t.filterParams[r.name]=l);var c=function(a){t.filterParams[r.name]=a,n(e,t)},u=function(t){return t+"<i class='ml10 fa fa-caret-down text-off'></i>"},p='<div class="datepicker-custom-list list-group mb0">'+i+"</div>",m='<div class="mr15 DTTT_container"><button name="'+r.name+'" class="btn datepicker-custom-selector">'+u(d)+"</button></div>";s(m);var f=a.find("[name='"+r.name+"']"),h=void 0!==r.options[1];f.datepicker({format:t._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom"}).on("show",function(){h&&($(".datepicker-days, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),$(".datepicker-custom-list").show(),$(".datepicker-custom-list").length||($(".datepicker").append(p),$(".datepicker .list-group-item").click(function(){$(".datepicker .list-group-item").removeClass("active"),$(this).addClass("active");var a=$(this).attr("data-value");"show-date-picker"===a?($(".datepicker-custom-list, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),$(".datepicker-days, .table-condensed").show()):($(".datepicker").hide(),moment(a,t._inputDateFormat).isValid()&&(a=moment(a,t._inputDateFormat).format(t._inputDateFormat)),f.html(u($(this).html())),c(a))})))}).on("changeDate",function(a){f.html(u(moment(a.date,t._inputDateFormat).format("Do MMMM YYYY"))),c(moment(a.date,t._inputDateFormat).format(t._inputDateFormat))})}),void 0!==t.rangeDatepicker[0]&&$.each(t.rangeDatepicker,function(o,r){var i=r.startDate||{},l=r.endDate||{},d=!!r.showClearButton,c='<i class="fa fa-calendar"></i>',u=i.value?moment(i.value,t._inputDateFormat).format("Do MMMM YYYY"):c,p=l.value?moment(l.value,t._inputDateFormat).format("Do MMMM YYYY"):c;t.filterParams[i.name]=i.value,t.filterParams[l.name]=l.value;var m=function(a,o){t.filterParams[a]=o,n(e,t)},f='<div class="mr15 DTTT_container"><div class="input-daterange input-group"><button class="btn btn-default form-control" name="'+i.name+'" data-date="'+i.value+'">'+u+'</button><span class="input-group-addon">-</span><button class="btn btn-default form-control" name="'+l.name+'" data-date="'+l.value+'">'+p+"</div></div>";s(f);var h=a.find(".input-daterange"),v=h.find("button").toArray();h.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom",inputs:v}).on("changeDate",function(a){var e=moment(a.date,t._inputDateFormat).format(t._inputDateFormat);t.filterParams[i.name]||(t.filterParams[i.name]=e),t.filterParams[l.name]||(t.filterParams[l.name]=e),m($(a.target).attr("name"),e),$(v[0]).html(moment(t.filterParams[i.name],t._inputDateFormat).format("Do MMMM YYYY")),$(v[1]).html(moment(t.filterParams[l.name],t._inputDateFormat).format("Do MMMM YYYY"))}).on("show",function(){d&&($(".datepicker-clear-selection").show(),$(".datepicker-clear-selection").length||($(".datepicker").append("<div class='datepicker-clear-selection p5 clickable text-center'>"+AppLanugage.clear+"</div>"),$(".datepicker .datepicker-clear-selection").click(function(){t.filterParams[i.name]="",m(l.name,""),$(v[0]).html(c),$(v[1]).html(c),$(".datepicker").hide()})))})}),void 0!==t.filterDropdown[0]){g="";$.each(t.filterDropdown,function(o,r){var i="",l="",d=[];$.each(r.options,function(t,a){var e="";a.isSelected&&(e="selected",l=a.id),r.showHtml?d.push({id:a.id,text:a.text}):i+="<option "+e+' value="'+a.id+'">'+a.text+"</option>"}),r.name&&(t.filterParams[r.name]=l);var c='<select class="'+r.class+'" name="'+r.name+'">'+i+"</select>";r.showHtml&&(c='<input class="'+r.class+'" name="'+r.name+'" />'),s('<div class="mr15 DTTT_container">'+c+"</div>");var u=a.find("[name='"+r.name+"']");void 0!==window.Select2&&(r.showHtml?u.select2({data:d,escapeMarkup:function(t){return t}}):u.select2()),u.change(function(){var o=$(this),i=o.attr("name"),s=o.val();t.filterParams[i]=s,r.dependent&&r.dependent.length&&b(i,s,t.filterDropdown,a,t.filterParams),n(e,t)})})}var b=function(t,a,e,n,o){$.each(e,function(e,r){if(r.dependency&&r.dependency.length&&-1!==r.dependency.indexOf(t)){var i=n.find("select[name="+r.name+"]");if((r.selfDependency&&!a||a)&&r.dataSource)$.ajax({url:r.dataSource,data:o,type:"POST",dataType:"json",success:function(t){if(t&&t.length){var a="",e="";$.each(t,function(t,n){t||(e=n.id),a+="<option value='"+n.id+"'>"+n.text+"</option>"}),i.html(a),i.select2("val",e)}}});else{var s=i.find("option:first");i.html("<option value='"+s.val()+"'>"+s.html()+"</option>"),i.select2("val",s.val())}s=i.find("option:first");o[r.name]=s.val()}})}};"undefined"!=typeof TableTools&&(TableTools.DEFAULTS.sSwfPath=AppHelper.assetsDirectory+"js/datatable/TableTools/swf/copy_csv_xls_pdf.swf");var $appFilterXhrRequest="new";function encodeAjaxPostData(t){return t=replaceAll("=","~",t),t=replaceAll("&","^",t)}function replaceAll(t,a,e){return e.replace(new RegExp(t,"g"),a)}!function(t){t.fn.appTable=function(a){var e=1*AppHelper.settings.displayLength;!isNaN(e)&&e||(e=10);var n=!1;"1"===AppHelper.settings.disableResponsiveDataTable?n=!1:"1"!==AppHelper.settings.disableResponsiveDataTableForMobile&&window.outerWidth<800&&(n=!0);var o={source:"",xlsColumns:[],pdfColumns:[],printColumns:[],columns:[],order:[[0,"asc"]],hideTools:!1,displayLength:e,dateRangeType:"",checkBoxes:[],multiSelect:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],stateSave:!0,isMobile:window.outerWidth<800,responsive:n,stateDuration:5184e3,columnShowHideOption:!0,tableRefreshButton:!1,filterParams:{datatable:!0},onDeleteSuccess:function(){},onUndoSuccess:function(){},onInitComplete:function(){},customLanguage:{noRecordFoundText:AppLanugage.noRecordFound,searchPlaceholder:AppLanugage.search,printButtonText:AppLanugage.print,excelButtonText:AppLanugage.excel,printButtonToolTip:AppLanugage.printButtonTooltip,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},footerCallback:function(t,a,e,n,o){},rowCallback:function(t,a,e,n){},summation:"",onRelaodCallback:function(){}},r=t(this);if(!r.is("table"))return console.log("appTable: Element must have to be a table",this),!1;var i=t.extend({},o,a);if(i.reload){var s=t(this).dataTable(),l=window.InstanceCollection[t(this).selector];return l||(l=i),s.fnReloadAjax(l.filterParams),t(this).data("onRelaodCallback")&&t(this).data("onRelaodCallback")(s,l.filterParams),!1}if(i.newData){s=t(this).dataTable();if(i.dataId){var d=t(this).find("[data-post-id='"+i.dataId+"']");d.length||(d=t(this).find("[data-index-id='"+i.dataId+"']")),d.length?(s.api().row(s.api().row(d.closest("tr")).index()).data(i.newData),s.fnUpdateRow(null,s.api().page())):s.fnUpdateRow(i.newData)}else i.rowDeleted?s.fnUpdateRow(i.newData,s.api().page(),!0):s.fnUpdateRow(i.newData);return!1}i.responsive&&r.addClass("nowrap");var c=function(a,e,n){var o="",r="";return"all"===e&&(r='data-section="all_pages"'),o+="<tr "+r+">",t.each(a.columns,function(r,i){var s="class = 'tf-blank' ",l=" ";a.summation[0]&&a.summation[0].column-1===r&&(l=n,s="class = 'tf-lable' "),t.each(a.summation,function(t,a){a.column===r&&(s="class = 'tf-result text-right' ",s+="data-"+e+'-page="'+a.column+'"')}),o+="<th "+s+">",o+=l,o+="</th>"}),o+="</tr>"};if(i.summation&&i.summation.length&&!i.isMobile){var u="<tfoot>";u+=c(i,"current",AppLanugage.total),u+=c(i,"all",AppLanugage.totalOfAllPages),u+="</tfoot>",r.html(u)}i._visible_columns=[],t.each(i.columns,function(t,a){!1!==a.visible&&i._visible_columns.push(t)}),i._exportable=i.xlsColumns.length+i.pdfColumns.length+i.printColumns.length,i._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,i._inputDateFormat="YYYY-MM-DD";var p={ajax:{url:(i=prepareDefaultFilters(i)).source,type:"POST",data:i.filterParams},sServerMethod:"POST",columns:i.columns,bProcessing:!0,iDisplayLength:i.displayLength,aLengthMenu:[[10,25,50,100,-1],[10,25,50,100,AppLanugage.all]],bAutoWidth:!1,bSortClasses:!1,order:i.order,stateSave:i.stateSave,responsive:i.responsive,fnStateLoadParams:function(t,a){a&&a.search&&(a.search.search="")},stateDuration:i.stateDuration,fnInitComplete:function(){i.onInitComplete(this)},language:{lengthMenu:"_MENU_",zeroRecords:i.customLanguage.noRecordFoundText,info:"_START_-_END_ / _TOTAL_",sInfo:"_START_-_END_ / _TOTAL_",infoFiltered:"(_MAX_)",search:"",searchPlaceholder:i.customLanguage.searchPlaceholder,sInfoEmpty:"0-0 / 0",sInfoFiltered:"(_MAX_)",sInfoPostFix:"",sInfoThousands:",",sProcessing:"<div class='table-loader'><span class='loading'></span></div>",oPaginate:{sPrevious:"<i class='fa fa-angle-double-left'></i>",sNext:"<i class='fa fa-angle-double-right'></i>"}},sDom:"",footerCallback:function(a,e,n,o,r){var l=this;if(i.summation){var d=l.api().page.info(),c="",u="",p="";if(!d.recordsTotal)return t(l).find("tfoot").hide(),!1;t(l).find("tfoot").show(),t.each(i.summation,function(a,e){var n=calculateDatatableTotal(l,e.column,function(t){return t&&!t.startsWith("<b>")?"currency"===e.dataType?unformatCurrency(t):"time"===e.dataType?moment.duration(t).asSeconds():"number"===e.dataType?unformatCurrency(t):t:0},!0);"currency"===e.dataType?n=toCurrency(n,e.currencySymbol):"time"===e.dataType?n=secondsToTimeFormat(n):"number"===e.dataType&&(n=toCurrency(n,"none"));var o=s.column(e.column).header();if(o&&(u+="<div class='box'><div class='box-content'>"+t(o).html()+"</div><div class='box-content text-right'>"+n+"</div></div>"),t(l).find("[data-current-page="+e.column+"]").html(n),d.pages>1){t(l).find("[data-section='all_pages']").show();var r=calculateDatatableTotal(l,e.column,function(t){return t&&!t.startsWith("<b>")?"currency"===e.dataType?unformatCurrency(t):"time"===e.dataType?moment.duration(t).asSeconds():"number"===e.dataType?unformatCurrency(t):t:0});"currency"===e.dataType?r=toCurrency(r,e.currencySymbol):"time"===e.dataType?r=secondsToTimeFormat(r):"number"===e.dataType&&(r=toCurrency(r,"none"));var i=s.column(e.column).header();i&&(p+="<div class='box'><div class='box-content'>"+t(i).html()+"</div><div class='box-content text-right'>"+r+"</div></div>"),t(l).find("[data-all-page="+e.column+"]").html(r)}else t(l).find("[data-section='all_pages']").hide()}),i.isMobile&&(u&&(c+="<div class='box'><div class='box-content strong'>"+AppLanugage.total+"</div></div>"+u),p&&(c+="<div class='box'><div class='box-content strong'>"+AppLanugage.totalOfAllPages+"</div></div>"+p),t(".summation-section").html(c))}i.footerCallback(a,e,n,o,r,l)},fnRowCallback:function(t,a,e,n){i.rowCallback(t,a,e,n)}};if(AppHelper.userId&&(p.stateSaveParams=function(t,a){-1===t.sInstance.indexOf("-user-ref-")&&(t.sInstance+="-user-ref-"+AppHelper.userId)},p.stateLoadCallback=function(t){-1===t.sInstance.indexOf("-user-ref-")&&(t.sInstance+="-user-ref-"+AppHelper.userId);try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(t){}}),i.hideTools||(p.sDom="<'datatable-tools'<'col-md-2 toolbar-left-top'l><'col-md-10 custom-toolbar'f>r>t<'datatable-tools clearfix'<'col-md-3'i><'col-md-9'p>>"),i._exportable){var m=[];i.xlsColumns.length&&m.push({extend:"excelHtml5",footer:!0,text:i.customLanguage.excelButtonText,exportOptions:{columns:":visible:not(.option)"},customize:function(a){if(r.find("[data-section='all_pages']")&&"none"!==r.find("[data-section='all_pages']").css("display")){var e=a.xl.worksheets["sheet1.xml"],n=t(e.childNodes[0].childNodes[1]),o=parseInt(n.find("row:last-child").attr("r"))+1,i=0,s='<row r="'+o+'">';r.find("[data-section='all_pages'] th").each(function(){t(this).text()&&(s+='<c t="inlineStr" r="'+"abcdefghijklmnopqrstuvwxyz"[i].toUpperCase()+o+'" s="2">',s+="<is>",s+="<t>"+t(this).text()+"</t>",s+="</is>",s+="</c>"),i+=1}),s+="</row>",e.childNodes[0].childNodes[1].innerHTML=e.childNodes[0].childNodes[1].innerHTML+s}}}),i.pdfColumns.length&&m.push({extend:"pdfHtml5",exportOptions:{columns:":visible:not(.option)"}}),i.printColumns.length&&m.push({extend:"print",autoPrint:!1,text:i.customLanguage.printButtonText,footer:!0,exportOptions:{columns:":visible:not(.option)"},customize:function(a){if(t(a.document.body).closest("html").addClass("dt-print-view"),r.find("[data-section='all_pages']")&&"none"!==r.find("[data-section='all_pages']").css("display")){var e=r.find("[data-section='all_pages']").clone();t(a.document.body).find("tfoot").append(e)}},customizeData:function(t,a,e){}}),i.hideTools||(p.sDom="<'datatable-tools'<'col-md-2 toolbar-left-top'l><'col-md-10 custom-toolbar'f<'datatable-export DTTT_container'B>>r>t<'datatable-tools clearfix'<'col-md-3'<'summation-section'> i><'col-md-9'p>>"),p.buttons=m}var f=r.dataTable(p),h=r.closest(".dataTables_wrapper");if(h.find(".DTTT_button_print").tooltip({placement:"bottom",container:"body"}),h.find("select").select2({minimumResultsForSearch:-1}),i.columnShowHideOption){var v=r.attr("id");s=r.DataTable();h.find(".toolbar-left-top").append('<div class="DTTT_container pull-left"><button class="btn btn-default column-show-hide-popover ml15" data-container="body" data-toggle="popover" data-placement="bottom"><i class="fa fa-eye-slash"></button></div>'),h.find(".column-show-hide-popover").popover({html:!0,content:function(){var a="";return t.each(i.columns,function(t,e){if(!1!==e.visible){var n="";s.column(t).visible()||(n="active"),a+="<li class='"+n+" list-group-item clickable toggle-table-column' data-column='"+t+"'>"+e.title+"</li>"}}),"<ul class='list-group' data-table='"+v+"'>"+a+"</ul>"}}),h.find(".column-show-hide-popover").on("shown.bs.popover",function(){t(".toggle-table-column").on("click",function(){var a=t(this).closest(".list-group").attr("data-table"),e=t("#"+a).DataTable().column(t(this).attr("data-column"));e&&(e.visible(!e.visible()),t(this).toggleClass("active"))})})}if(i.tableRefreshButton){h.find(".toolbar-left-top").append('<div class="DTTT_container pull-left "><button class="btn btn-default at-table-refresh-button ml15"><i class="fa fa-refresh"></i></button></div>'),h.find(".at-table-refresh-button").on("click",function(){r.appTable({reload:!0,filterParams:i.filterParams})})}t("body").hasClass("destroy-popover")||(t("body").addClass("destroy-popover"),t(".destroy-popover").on("click",function(a){if("popover"!==t(a.target).closest("button").attr("data-toggle")&&!t(a.target).closest(".popover").length&&!t(a.target).hasClass("editable")){var e=t(".popover.in").attr("id");t("[aria-describedby="+e+"]").trigger("click")}})),r.data("onRelaodCallback",i.onRelaodCallback),buildFilterDom(i,h,r);var g=function(a,e){var n=e.closest("tr"),o=r.DataTable(),s=e.attr("data-undo"),l=e.attr("data-action-url"),d=e.attr("data-id");f.fnDeleteRow(o.row(n).index(),function(){o.page(o.page()).draw("page")},!1);var c,u=appAlert.warning(a.message,{duration:2e4});i.onDeleteSuccess(a),"0"!==s&&(c={alertSelector:u,url:l,id:d},t('<a class="undo-delete" href="javascript:;"><strong>Undo</strong></a>').insertAfter(t(c.alertSelector).find(".app-alert-message")),t(c.alertSelector).find(".undo-delete").bind("click",function(){t(c.alertSelector).remove(),appLoader.show(),t.ajax({url:c.url,type:"POST",dataType:"json",data:{id:c.id,undo:!0},success:function(t){appLoader.hide(),t.success&&(r.appTable({newData:t.data,rowDeleted:!0}),i.onUndoSuccess(t))}})}))};window.InstanceCollection=window.InstanceCollection||{},window.InstanceCollection[t(this).selector]=i,t("body").find(r).on("click","a[data-action=delete]",function(t){deleteHandler(t,g)}),t("body").find(r).on("click","a[data-action=delete-confirmation]",function(t){deleteConfirmationHandler(t,g)}),t("body").find(r).on("click","[data-action=update]",function(a){appLoader.show();var e=t(a.currentTarget);a.data&&a.data.target&&(e=a.data.target);var n=e.attr("data-action-url");t.ajax({url:n,dataType:"json",success:function(a){a.success?(t(".dataTable:visible").appTable({newData:a.data,dataId:a.id}),appAlert.success(a.message,{duration:1e4})):appAlert.error(a.message),appLoader.hide()}})}),t.fn.dataTableExt.oApi.getSettings=function(t){return t},t.fn.dataTableExt.oApi.fnReloadAjax=function(a,e){this.fnClearTable(this),this.oApi._fnProcessingDisplay(a,!0);var n=this;"new"!==$appFilterXhrRequest&&($appFilterXhrRequest.abort(),$appFilterXhrRequest="new"),$appFilterXhrRequest=t.ajax({url:a.ajax.url,type:"POST",dataType:"json",data:e,success:function(t){for(var e=0;e<t.data.length;e++)n.oApi._fnAddData(a,t.data[e]);a.aiDisplay=a.aiDisplayMaster.slice(),n.fnDraw(n),n.oApi._fnProcessingDisplay(a,!1)}})},t.fn.dataTableExt.oApi.fnUpdateRow=function(t,a,e,n){a&&this.oApi._fnAddData(t,a),n&&this.fnDraw(this),e?this.oApi._fnPageChange(t,e,!0):this.fnDraw(this)}}}(jQuery),deleteHandler=function(t,a){appLoader.show();var e=$(t.currentTarget);t.data&&t.data.target&&(e=t.data.target);var n=e.attr("data-action-url"),o=e.attr("data-id"),r=e.attr("data-reload-on-success");$.ajax({url:n,type:"POST",dataType:"json",data:{id:o},success:function(t){t.success?(a&&a(t,e),r&&location.reload()):appAlert.error(t.message),appLoader.hide()}})},deleteConfirmationHandler=function(t,a){var e=$("#confirmDeleteButton"),n=$(t.currentTarget);n.each(function(){$.each(this.attributes,function(){this.specified&&this.name.match("^data-")&&e.attr(this.name,this.value)})}),n.attr("data-undo","0"),e.unbind("click"),e.on("click",{target:n},function(t){deleteHandler(t,a)}),$("#confirmationModal").modal("show")},function(t){var a;a=function(t){return function(){var a={info:function(t,a){return this._settings=e(a),this._settings.alertType="info",n(t),"#"+this._settings.alertId},success:function(t,a){return this._settings=e(a),this._settings.alertType="success",n(t),"#"+this._settings.alertId},warning:function(t,a){return this._settings=e(a),this._settings.alertType="warning",n(t),"#"+this._settings.alertId},error:function(t,a){return this._settings=e(a),this._settings.alertType="error",n(t),"#"+this._settings.alertId},options:{container:"body",duration:0,showProgressBar:!0,clearAll:!0,animate:!0}};return a;function e(e){if(!e)e={};return e.alertId="app-alert-"+function(){for(var t="",a="abcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}(),this._settings=t.extend({},a.options,e)}function n(a){!function(){this._settings.clearAll&&t("[role='alert']").remove()}(),t(this._settings.container).length?(this._settings.animate&&setTimeout(function(){t(".app-alert").animate({opacity:1,right:"40px"},500,function(){t(".app-alert").animate({right:"15px"},300)})},20),t(this._settings.container).prepend(function(t){var a="info";return"error"===this._settings.alertType?a="danger":"success"===this._settings.alertType?a="success":"warning"===this._settings.alertType&&(a="warning"),this._settings.animate&&(a+=" animate"),'<div id="'+this._settings.alertId+'" class="app-alert alert alert-'+a+' alert-dismissible " role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="app-alert-message">'+t+'</div><div class="progress"><div class="progress-bar progress-bar-'+a+' hide" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div>'}(a)),function(){if(this._settings.duration&&this._settings.showProgressBar){var a="#"+this._settings.alertId,e=t(a).find(".progress-bar");e.removeClass("hide").width(0);var n="width "+this._settings.duration+"ms ease";e.css({WebkitTransition:n,MozTransition:n,MsTransition:n,OTransition:n,transition:n}),setTimeout(function(){t(a).length>0&&t(a).remove()},this._settings.duration)}}()):console.log("appAlert: container must be an html selector!")}}()},window.appAlert=a(window.jQuery)}(),function(t){var a;a=function(t){return function(){var a={show:function(e){var n=t("#app-loader");if(this._settings=function(e){if(!e)var e={};return this._settings=t.extend({},a.options,e)}(e),!n.length){var o=t(this._settings.container);o.length?o.append('<div id="app-loader" class="app-loader" style="z-index:'+this._settings.zIndex+";"+this._settings.css+'"><div class="loading"></div></div>'):console.log("appLoader: container must be an html selector!")}},hide:function(){var a=t("#app-loader");a.length&&a.remove()},options:{container:"body",zIndex:"auto",css:""}};return a}()},window.appLoader=a(window.jQuery)}(),function(t){var a;a=function(t){return function(){var a={init:function(o){this._settings=function(a){a||(a={});return this._settings=t.extend({},appLoader.options,a)}(o),function(o){var r="<div class='app-modal-sidebar hidden-xs'>                                        <div class='app-modal-close'><span>&times;</span></div>                                        <div class='app-moadl-sidebar-scrollbar'>                                            <div class='app-modal-sidebar-area'>                                            </div>                                        </div>                                    </div>",i="<i class='fa fa-expand expand hidden-xs'></i>";(!1===o.sidebar||isMobile())&&(r="",i="<div class='app-modal-close app-modal-fixed-close-button'><span>&times;</span></div>");var s="<div class='app-modal loading'>                                <i class='fa fa-compress compress'></i>                                <div class='app-modal-body'>                                    <div class='app-modal-content'>"+i+"<div class='hide app-modal-close'><span>&times;</span></div>                                        <div class='app-modal-content-area'>                                        </div>                                    </div>"+r+"</div>                            </div>";n(),t("body").prepend(s),setTimeout(function(){var a=t(window).height()-60;t(".app-modal-content-area").prop("scrollHeight")>a&&t(".app-modal-content-area").css({"max-height":a+"px","overflow-y":"scroll"}),t.fn.mCustomScrollbar&&t(".app-moadl-sidebar-scrollbar").mCustomScrollbar({setHeight:a,theme:"minimal-dark",autoExpandScrollbar:!0})},200),t(".expand").click(function(){t(".app-modal").addClass("full-content")}),t(".compress").click(function(){t(".app-modal").removeClass("full-content")}),t(".app-modal-close").click(function(){n()}),t(document).bind("keyup",e),appLoader.show({container:".app-modal",css:"top:35%; right:48%;"}),appModalXhr=t.ajax({url:o.url||"",data:{},cache:!1,type:"POST",success:function(a){var e=t(a);t(".app-modal-content-area").html(e.find(".app-modal-content").html()),t(".app-modal-sidebar-area").html(e.find(".app-modal-sidebar").html()),e.remove(),t(".app-modal").removeClass("loading"),appLoader.hide()},statusCode:{404:function(){a.destroy(),appAlert.error("404: Page not found.")}},error:function(){a.destroy(),appAlert.error("500: Internal Server Error.")}})}(this._settings)},destroy:n,options:{url:"",css:"",sidebar:!0}};return a;function e(t){27===t.keyCode&&n()}function n(){t(".app-modal").remove(),t(document).unbind("keyup",e),"undefined"!=typeof appModalXhr&&appModalXhr.abort()}}()},window.appContentModal=a(window.jQuery)}(),function(t){t.fn.appDateRange=function(a){var e=t.extend({},{dateRangeType:"yearly",filterParams:{},onChange:function(t){},onInit:function(t){}},a);e._inputDateFormat="YYYY-MM-DD",this.each(function(){var a=t(this);a.append('<div class="ml15"><button data-act="prev" class="btn btn-default date-range-selector"><i class="fa fa-chevron-left"></i></button><button data-act="datepicker" class="btn btn-default" style="margin: -1px"></button><button data-act="next"  class="btn btn-default date-range-selector"><i class="fa fa-chevron-right"></i></button></div>');var n=a.find("[data-act='datepicker']"),o=a.find(".date-range-selector");if("yearly"===e.dateRangeType){var r=function(t){t.html(moment(e.filterParams.start_date).format("YYYY"))};r(n),n.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom"}).on("changeDate",function(t){var a=moment(t.date).format(e._inputDateFormat),o=moment(a).format("YYYY");e.filterParams.start_date=o+"-01-01",e.filterParams.end_date=o+"-12-31",e.filterParams.year=o,r(n),e.onChange(e.filterParams)});var i=moment().format("YYYY");e.filterParams.start_date=i+"-01-01",e.filterParams.end_date=i+"-12-31",e.filterParams.year=i,e.onInit(e.filterParams),o.click(function(){var a=t(this).attr("data-act"),o=moment(e.filterParams.start_date),i=moment(e.filterParams.end_date);"next"===a?(o=o.add(1,"years").format(e._inputDateFormat),i=i.add(1,"years").format(e._inputDateFormat)):"prev"===a&&(o=o.subtract(1,"years").format(e._inputDateFormat),i=i.subtract(1,"years").format(e._inputDateFormat)),e.filterParams.start_date=o,e.filterParams.end_date=i,e.filterParams.year=moment(o).format("YYYY"),r(n),e.onChange(e.filterParams)})}else if("monthly"===e.dateRangeType){var s=function(t){t.html(moment(e.filterParams.start_date).format("MMMM YYYY"))};s(n),n.datepicker({format:"YYYY-MM",viewMode:"months",minViewMode:"months",autoclose:!0,language:"custom"}).on("changeDate",function(t){var a=moment(t.date).format(e._inputDateFormat),o=moment(a).daysInMonth(),r=moment(a).format("YYYY-MM");e.filterParams.start_date=r+"-01",e.filterParams.end_date=r+"-"+o,s(n),e.onChange(e.filterParams)});i=moment().format("YYYY-MM");e.filterParams.start_date=i+"-01",e.filterParams.end_date=i+"-31",e.filterParams.year=i,e.onInit(e.filterParams),o.click(function(){var a=t(this).attr("data-act"),o=moment(e.filterParams.start_date),r=moment(e.filterParams.end_date);if("next"===a){var i=o.add(1,"months"),l=i.daysInMonth();o=(d=i.format("YYYY-MM"))+"-01",r=d+"-"+l}else if("prev"===a){var d,c=o.subtract(1,"months");l=c.daysInMonth();o=(d=c.format("YYYY-MM"))+"-01",r=d+"-"+l}e.filterParams.start_date=o,e.filterParams.end_date=r,e.filterParams.year=moment(o).format("YYYY-MM"),s(n),e.onChange(e.filterParams)})}})}}(jQuery);var loadFilterView=function(t){t.source&&t.targetSelector&&$.ajax({url:t.source,data:t.filterParams,cache:!1,type:"POST",success:function(a){$(t.targetSelector).html(a),appLoader.hide()},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}})};!function(t){t.fn.appFilters=function(a){appLoader.show();var e={source:"",targetSelector:"",reloadSelector:"",dateRangeType:"",checkBoxes:[],multiSelect:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],isMobile:window.outerWidth<800,filterParams:{customFilter:!0},search:{show:!1},customLanguage:{searchPlaceholder:AppLanugage.search,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},beforeRelaodCallback:function(){},afterRelaodCallback:function(){},onInitComplete:function(){}},n=t(this),o=n;o.append("<div class='custom-toolbar'></div>");var r=t.extend({},e,a);if(r.reload){var i=t(this),s=window.InstanceCollection[i.selector];return i.data("beforeRelaodCallback")&&i.data("beforeRelaodCallback")(i,s.filterParams),loadFilterView(s),i.data("afterRelaodCallback")&&i.data("afterRelaodCallback")(i,s.filterParams),!1}r._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,r._inputDateFormat="YYYY-MM-DD",r=prepareDefaultFilters(r),buildFilterDom(r,o,n),window.InstanceCollection=window.InstanceCollection||{},window.InstanceCollection[n.selector]=r,r.onInitComplete&&r.onInitComplete(n,r.filterParams),loadFilterView(r),n.data("beforeRelaodCallback",r.beforeRelaodCallback),n.data("afterRelaodCallback",r.afterRelaodCallback)}}(jQuery),replaceAllString=function(t,a,e){return t.split(a).join(e)},toCurrency=function(t,a){t="0"==AppHelper.settings.noOfDecimals?Math.round(parseFloat(t))+".00":parseFloat(t).toFixed(2),a||(a=AppHelper.settings.currencySymbol);var e=t.replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return" "===AppHelper.settings.thousandSeparator&&(e=e.replace(","," ")),","===AppHelper.settings.decimalSeparator&&(e=replaceAllString(e,".","_"),e=replaceAllString(e,",","."),e=replaceAllString(e,"_",",")),"none"===a&&(a=""),"0"==AppHelper.settings.noOfDecimals&&(e=e.slice(0,-3)),"right"===AppHelper.settings.currencyPosition?e+""+a:"0"==e.indexOf("-")?"-"+a+(e=e.replace("-","")):a+""+e},calculateDatatableTotal=function(t,a,e,n){var o={};return n&&(o={page:"current"}),t.api().column(a,o).data().reduce(function(t,a,n,o){return e?t+e(a):t+a},0)},unformatCurrency=function(t){return(t=t.toString())&&(0!=(t=t.replace(/[^0-9.,-]/g,"")).indexOf(".")&&0!=t.indexOf(",")||(t=t.slice(1)),","===AppHelper.settings.decimalSeparator?(t=replaceAllString(t,".",""),t=replaceAllString(t,",",".")):t=replaceAllString(t,",",""),t*=1),t||0},secondsToTimeFormat=function(t){var a=parseInt(t,10),e=Math.floor(a/3600),n=Math.floor((a-3600*e)/60),o=a-3600*e-60*n;return e<10&&(e="0"+e),n<10&&(n="0"+n),o<10&&(o="0"+o),e+":"+n+":"+o},clearAppTableState=function(t){t&&setTimeout(function(){t.api().state.clear()},200)},showHideAppTableColumn=function(t,a,e){t.fnSetColumnVis(a,!!e)},function(t){t.fn.appMention=function(a){var e=t.extend({},{at:"@",dataType:"json",source:"",data:{}},a),n=this;t.ajax({url:e.source,data:e.data,dataType:e.dataType,method:"POST",success:function(a){a.success&&t(n).atwho({at:e.at,data:a.data,insertTpl:"${content}"})}})}}(jQuery),function(t){t.fn.appMultiSelect=function(a){var e=t.extend({},{text:"",options:[],onChange:function(t){},onInit:function(t){}},a);this.each(function(){var a=t(this),n="",o=[];t.each(e.options,function(t,a){var r="";a.isChecked&&(r=" active",o.push(a.id)),n+='<li class="list-group-item clickable '+r+'" data-name="'+e.name+'" data-value="'+a.id+'">',n+=a.text,n+="</li>"}),n="<ul class='list-group dropdown-menu' data-act='multiselect'>"+n+"</ul>";var r='<div class="mr15 DTTT_container custom-toolbar"><span class="dropdown inline-block filter-multi-select"><button class="btn btn-default dropdown-toggle " type="button" data-toggle="dropdown" aria-expanded="true">'+e.text+' <span class="caret"></span> </button>'+n+"</span></div>";a.append(r),e.onInit(o),a.find("[data-name='"+e.name+"']").click(function(){var a=t(this);return a.toggleClass("active"),setTimeout(function(){var n=[];a.parent().find("li").each(function(){t(this).hasClass("active")&&n.push(t(this).attr("data-value"))}),e.onChange(n)}),!1})})}}(jQuery),function(t){t.fn.appModifier=function(a){var e=t.extend({},{actionUrl:"",value:"",actionType:"select2",showbuttons:!1,datepicker:{},select2Option:{},placement:"auto",dataType:"json",onSuccess:function(){}},a),n=t(this),o=getRandomAlphabet(5),r="";e.showbuttons&&(r="<div class='custom-popover-button-area mt10 clearfix'>\n                            <div id='custom-popover-submit-btn-"+o+"' class='col-md-6 pl0 pr5'><button class='btn btn-primary btn-sm w100p'><i class='fa fa-check'></i></button></div>\n                            <div class='col-md-6 pr0 pl5 custom-popover-close-btn'><button class='btn btn-default btn-sm w100p'><i class='fa fa-close'></i></button></div>\n                        </div>");var i="";if("select2"===e.actionType)i="<input id='"+o+"' value='"+e.value+"' type='text' class='form-control' /> "+r;else if("date"===e.actionType){var s=getJsDateFormat(),l=e.value.split("-"),d=l[0],c=l[1],u=l[2];i="<div style='height: 240px;' id='"+o+"'  data-date='"+s.replace("yyyy",d).replace("mm",c).replace("dd",u)+"' data-date-format='"+s+"'></div>"}var p="<div class='popover app-popover out' role='tooltip'>\n                                <div class='arrow'></div>\n                                <div class='popover-body'>\n                                    <div class='loader-container inline-loader hide'>\n                                    </div>\n                                    "+i+"\n                                </div>\n                            </div>";n.on("shown.bs.popover",function(){var a=t(this),e=a.attr("aria-describedby"),n=!1;"1"!==a.attr("data-hasppover")&&(n=!0,a.attr("data-hasppover","1"),t(".popover").popover("hide"),setTimeout(function(){a.popover("show"),t(".app-popover").removeClass("out")},200)),t(".popover").each(function(){t(this).attr("id")!==e||n?t(this).addClass("out"):t(this).removeClass("out")})}),n.popover({html:!0,template:p,placement:e.placement,content:function(){return" "}}),n.attr("popover-opened")||n.popover("show");var m=t("#"+o);function f(a,e,n,o){var r=m.closest(".popover-body").height(),i=m.closest(".popover-body").width();m.closest(".popover-body").find(".loader-container").removeClass("hide").css({height:r,width:i}),m.closest(".popover-body").find(".custom-popover-button-area").addClass("hide"),m.addClass("hide"),t.ajax({url:n.actionUrl,type:"POST",dataType:n.dataType,data:{value:e},success:function(t){a.popover("hide"),setTimeout(function(){m.closest(".popover-body").find(".loader-container").addClass("hide"),m.closest(".popover-body").find(".custom-popover-button-area").removeClass("hide"),m.removeClass("hide")},200),t.success?(n.onSuccess(t),o&&a.text(o)):appAlert.error(t.message)}})}"select2"===e.actionType?e.showbuttons?m.select2(e.select2Option):m.select2(e.select2Option).change(function(a){f(n,t(this).val(),e,a.added.text)}):"date"===e.actionType&&(e.datepicker.onChangeDate=function(t){f(n,t,e)},setDatePicker("#"+o,e.datepicker)),t("div#custom-popover-submit-btn-"+o).click(function(){f(n,m.val(),e)}),t(".custom-popover-close-btn").click(function(){n.popover("hide")}),n.attr("popover-opened",!0)}}(jQuery);